import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{a as t,c as n,i as r,l as i,n as a,o,r as s,s as c,t as l,u}from"./vendor-react-CNklW-kl.js";import{t as d}from"./vendor-zustand-DxRg0g1q.js";import{a as f,i as p,n as m,r as h,t as g}from"./vendor-tone-D0MYpYCa.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var _=i(),v=e(u(),1),y=(e,t,n)=>({name:e,accidental:t,display:n});const b=[{id:`c-major`,name:`C Major`,category:`major`,notes:[y(`C`,`natural`,`C`),y(`D`,`natural`,`D`),y(`E`,`natural`,`E`),y(`F`,`natural`,`F`),y(`G`,`natural`,`G`),y(`A`,`natural`,`A`),y(`B`,`natural`,`B`),y(`C`,`natural`,`C`)]},{id:`g-major`,name:`G Major`,category:`major`,notes:[y(`G`,`natural`,`G`),y(`A`,`natural`,`A`),y(`B`,`natural`,`B`),y(`C`,`natural`,`C`),y(`D`,`natural`,`D`),y(`E`,`natural`,`E`),y(`F`,`sharp`,`F#`),y(`G`,`natural`,`G`)]},{id:`d-major`,name:`D Major`,category:`major`,notes:[y(`D`,`natural`,`D`),y(`E`,`natural`,`E`),y(`F`,`sharp`,`F#`),y(`G`,`natural`,`G`),y(`A`,`natural`,`A`),y(`B`,`natural`,`B`),y(`C`,`sharp`,`C#`),y(`D`,`natural`,`D`)]},{id:`a-major`,name:`A Major`,category:`major`,notes:[y(`A`,`natural`,`A`),y(`B`,`natural`,`B`),y(`C`,`sharp`,`C#`),y(`D`,`natural`,`D`),y(`E`,`natural`,`E`),y(`F`,`sharp`,`F#`),y(`G`,`sharp`,`G#`),y(`A`,`natural`,`A`)]},{id:`e-major`,name:`E Major`,category:`major`,notes:[y(`E`,`natural`,`E`),y(`F`,`sharp`,`F#`),y(`G`,`sharp`,`G#`),y(`A`,`natural`,`A`),y(`B`,`natural`,`B`),y(`C`,`sharp`,`C#`),y(`D`,`sharp`,`D#`),y(`E`,`natural`,`E`)]},{id:`b-major`,name:`B Major`,category:`major`,notes:[y(`B`,`natural`,`B`),y(`C`,`sharp`,`C#`),y(`D`,`sharp`,`D#`),y(`E`,`natural`,`E`),y(`F`,`sharp`,`F#`),y(`G`,`sharp`,`G#`),y(`A`,`sharp`,`A#`),y(`B`,`natural`,`B`)]},{id:`f-sharp-major`,name:`F# Major`,category:`major`,notes:[y(`F`,`sharp`,`F#`),y(`G`,`sharp`,`G#`),y(`A`,`sharp`,`A#`),y(`B`,`natural`,`B`),y(`C`,`sharp`,`C#`),y(`D`,`sharp`,`D#`),y(`E`,`sharp`,`E#`),y(`F`,`sharp`,`F#`)]},{id:`f-major`,name:`F Major`,category:`major`,notes:[y(`F`,`natural`,`F`),y(`G`,`natural`,`G`),y(`A`,`natural`,`A`),y(`B`,`flat`,`Bb`),y(`C`,`natural`,`C`),y(`D`,`natural`,`D`),y(`E`,`natural`,`E`),y(`F`,`natural`,`F`)]},{id:`b-flat-major`,name:`Bb Major`,category:`major`,notes:[y(`B`,`flat`,`Bb`),y(`C`,`natural`,`C`),y(`D`,`natural`,`D`),y(`E`,`flat`,`Eb`),y(`F`,`natural`,`F`),y(`G`,`natural`,`G`),y(`A`,`natural`,`A`),y(`B`,`flat`,`Bb`)]},{id:`e-flat-major`,name:`Eb Major`,category:`major`,notes:[y(`E`,`flat`,`Eb`),y(`F`,`natural`,`F`),y(`G`,`natural`,`G`),y(`A`,`flat`,`Ab`),y(`B`,`flat`,`Bb`),y(`C`,`natural`,`C`),y(`D`,`natural`,`D`),y(`E`,`flat`,`Eb`)]},{id:`a-flat-major`,name:`Ab Major`,category:`major`,notes:[y(`A`,`flat`,`Ab`),y(`B`,`flat`,`Bb`),y(`C`,`natural`,`C`),y(`D`,`flat`,`Db`),y(`E`,`flat`,`Eb`),y(`F`,`natural`,`F`),y(`G`,`natural`,`G`),y(`A`,`flat`,`Ab`)]},{id:`d-flat-major`,name:`Db Major`,category:`major`,notes:[y(`D`,`flat`,`Db`),y(`E`,`flat`,`Eb`),y(`F`,`natural`,`F`),y(`G`,`flat`,`Gb`),y(`A`,`flat`,`Ab`),y(`B`,`flat`,`Bb`),y(`C`,`natural`,`C`),y(`D`,`flat`,`Db`)]}];var x={SETTINGS:`tonedoku_settings`,PROGRESS:`tonedoku_progress`},S={soundEnabled:!0,volume:.7,noteNotation:`standard`};function C(e,t){if(!e)return t;try{return JSON.parse(e)}catch(e){return console.error(`Failed to parse stored data:`,e),t}}function w(e,t){try{return localStorage.setItem(e,t),!0}catch(e){return console.error(`Failed to save to localStorage:`,e),!1}}function T(e){return w(x.SETTINGS,JSON.stringify(e))}function E(){return C(localStorage.getItem(x.SETTINGS),S)}const D=d((e,t)=>({soundEnabled:!0,volume:.7,noteNotation:`standard`,toggleSound:()=>{e(e=>(T({soundEnabled:!e.soundEnabled,volume:e.volume,noteNotation:e.noteNotation}),{soundEnabled:!e.soundEnabled}))},setVolume:n=>{let r=Math.max(0,Math.min(1,n));e(()=>(T({soundEnabled:t().soundEnabled,volume:r,noteNotation:t().noteNotation}),{volume:r}))},setNoteNotation:n=>{e(()=>(T({soundEnabled:t().soundEnabled,volume:t().volume,noteNotation:n}),{noteNotation:n}))},loadFromStorage:()=>{e(E())}}));var O={C:`Do`,D:`Re`,E:`Mi`,F:`Fa`,G:`Sol`,A:`La`,B:`Si`};function k(e,t){let n=t===`solfege`?O[e.name]:e.name;return e.accidental===`sharp`?`${n}#`:e.accidental===`flat`?`${n}b`:n}function A(e,t){return t===`solfege`?O[e]:e}function j(){let e=D(e=>e.noteNotation);return t=>k(t,e)}var M=l(),N=v.memo(({scale:e,onClick:t})=>{let n=j(),r=e.notes[0];return(0,M.jsxs)(`button`,{onClick:()=>t(e.id),className:`group relative flex aspect-square w-full flex-col items-center justify-center overflow-hidden rounded-2xl bg-[var(--color-surface)] p-3 sm:p-4 transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl hover:shadow-[var(--color-primary)]/20 active:translate-y-0 active:scale-95 border border-white/5 hover:border-[var(--color-primary)]/50 touch-manipulation focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)]`,children:[(0,M.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-br from-[var(--color-primary)]/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100`}),(0,M.jsx)(`span`,{className:`relative z-10 text-3xl sm:text-4xl font-bold text-[var(--color-text)] transition-colors duration-200 group-hover:text-[var(--color-primary)]`,children:n(r)}),(0,M.jsx)(`span`,{className:`relative z-10 mt-1 sm:mt-2 text-xs font-medium text-[var(--color-text-muted)] uppercase tracking-wider transition-colors duration-200 group-hover:text-[var(--color-text)]`,children:e.category})]})});N.displayName=`ScaleCard`;var P=N,F=({title:e,scales:t,onScaleSelect:n})=>(0,M.jsxs)(`section`,{className:`w-full space-y-4 sm:space-y-6`,children:[(0,M.jsx)(`h2`,{className:`text-lg sm:text-xl font-bold uppercase tracking-widest text-[var(--color-text)] pl-2 sm:pl-3 border-l-4 border-[var(--color-primary)]`,children:e}),(0,M.jsx)(`div`,{className:`grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6`,children:t.map(e=>(0,M.jsx)(P,{scale:e,onClick:n},e.id))})]}),I=({children:e,variant:t=`primary`,fullWidth:n=!1,className:r=``,disabled:i,...a})=>{let o={primary:`bg-[var(--color-primary)] text-white hover:opacity-90 shadow-lg shadow-[var(--color-primary)]/20 focus:ring-[var(--color-primary)]`,secondary:`bg-[var(--color-surface)] text-[var(--color-text)] hover:bg-[var(--color-surface)]/80 focus:ring-[var(--color-text-muted)]`,outline:`border-2 border-[var(--color-text-muted)] text-[var(--color-text-muted)] hover:border-[var(--color-text)] hover:text-[var(--color-text)] focus:ring-[var(--color-text-muted)]`,success:`bg-[var(--color-success)] text-white hover:opacity-90 shadow-lg shadow-[var(--color-success)]/20 focus:ring-[var(--color-success)]`},s=n?`w-full`:``;return(0,M.jsx)(`button`,{className:`rounded-lg px-4 py-2 sm:px-6 sm:py-3 font-semibold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation min-h-[44px] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--color-background)] ${o[t]} ${s} ${r}`,disabled:i,...a,children:e})},L=({isOpen:e,onClose:t})=>{let{soundEnabled:n,volume:r,noteNotation:i,toggleSound:a,setVolume:o,setNoteNotation:s}=D();return e?(0,M.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-[var(--color-background)]/95 backdrop-blur-sm p-4 sm:p-6 animate-in fade-in duration-200`,onClick:e=>{e.target===e.currentTarget&&t()},children:(0,M.jsxs)(`div`,{className:`w-full max-w-md bg-[var(--color-surface)] rounded-2xl shadow-2xl p-6 sm:p-8 animate-in zoom-in duration-200`,children:[(0,M.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,M.jsx)(`h2`,{className:`text-2xl sm:text-3xl font-black tracking-tight text-[var(--color-text)]`,children:`Settings`}),(0,M.jsx)(`button`,{onClick:t,className:`flex items-center justify-center rounded-full p-2 text-[var(--color-text-muted)] transition-all duration-200 hover:bg-[var(--color-background)] hover:text-[var(--color-text)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-surface)] min-w-[44px] min-h-[44px]`,"aria-label":`Close settings`,children:(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,M.jsx)(`line`,{x1:`18`,y1:`6`,x2:`6`,y2:`18`}),(0,M.jsx)(`line`,{x1:`6`,y1:`6`,x2:`18`,y2:`18`})]})})]}),(0,M.jsxs)(`div`,{className:`space-y-6`,children:[(0,M.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,M.jsxs)(`div`,{className:`flex-1`,children:[(0,M.jsx)(`label`,{htmlFor:`sound-toggle`,className:`text-base sm:text-lg font-semibold text-[var(--color-text)] block mb-1`,children:`Sound`}),(0,M.jsx)(`p`,{className:`text-sm text-[var(--color-text-muted)]`,children:`Enable or disable all sounds`})]}),(0,M.jsx)(`button`,{id:`sound-toggle`,onClick:a,className:`relative inline-flex h-8 w-14 sm:h-10 sm:w-16 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-surface)] ${n?`bg-[var(--color-primary)]`:`bg-[var(--color-text-muted)]/30`}`,role:`switch`,"aria-checked":n,"aria-label":`Toggle sound`,children:(0,M.jsx)(`span`,{className:`inline-block h-6 w-6 sm:h-8 sm:w-8 transform rounded-full bg-white shadow-lg transition-transform duration-200 ${n?`translate-x-7 sm:translate-x-7`:`translate-x-1`}`})})]}),(0,M.jsxs)(`div`,{className:`transition-opacity duration-200 ${n?`opacity-100`:`opacity-50`}`,children:[(0,M.jsxs)(`label`,{htmlFor:`volume-slider`,className:`text-base sm:text-lg font-semibold text-[var(--color-text)] block mb-3`,children:[`Volume: `,Math.round(r*100),`%`]}),(0,M.jsx)(`input`,{id:`volume-slider`,type:`range`,min:`0`,max:`100`,value:r*100,onChange:e=>o(Number(e.target.value)/100),disabled:!n,className:`w-full h-2 bg-[var(--color-background)] rounded-lg appearance-none cursor-pointer disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-surface)]`,style:{background:n?`linear-gradient(to right, var(--color-primary) 0%, var(--color-primary) ${r*100}%, var(--color-background) ${r*100}%, var(--color-background) 100%)`:void 0}})]}),(0,M.jsxs)(`div`,{children:[(0,M.jsx)(`label`,{className:`text-base sm:text-lg font-semibold text-[var(--color-text)] block mb-3`,children:`Note Notation`}),(0,M.jsxs)(`div`,{className:`grid grid-cols-2 gap-3`,children:[(0,M.jsxs)(`button`,{onClick:()=>s(`standard`),className:`flex flex-col items-center justify-center py-4 px-4 rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-surface)] ${i===`standard`?`bg-[var(--color-primary)] text-white shadow-lg scale-105`:`bg-[var(--color-background)] text-[var(--color-text)] hover:bg-[var(--color-background)]/80`}`,children:[(0,M.jsx)(`span`,{className:`text-sm sm:text-base font-bold`,children:`C D E`}),(0,M.jsx)(`span`,{className:`text-xs sm:text-sm mt-1 opacity-80`,children:`Standard`})]}),(0,M.jsxs)(`button`,{onClick:()=>s(`solfege`),className:`flex flex-col items-center justify-center py-4 px-4 rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-surface)] ${i===`solfege`?`bg-[var(--color-primary)] text-white shadow-lg scale-105`:`bg-[var(--color-background)] text-[var(--color-text)] hover:bg-[var(--color-background)]/80`}`,children:[(0,M.jsx)(`span`,{className:`text-sm sm:text-base font-bold`,children:`Do Re Mi`}),(0,M.jsx)(`span`,{className:`text-xs sm:text-sm mt-1 opacity-80`,children:`Solfège`})]})]})]})]}),(0,M.jsx)(`div`,{className:`mt-8`,children:(0,M.jsx)(I,{variant:`primary`,onClick:t,fullWidth:!0,children:`Done`})})]})}):null},R=()=>{let e=c(),[t,n]=(0,v.useState)(!1),r=t=>{e(`/scale/${t}`)};return(0,M.jsxs)(`div`,{className:`w-full max-w-6xl p-4 sm:p-6 md:p-8 lg:p-10`,children:[(0,M.jsxs)(`header`,{className:`mb-8 sm:mb-10 md:mb-12 flex items-center justify-between`,children:[(0,M.jsx)(`h1`,{className:`text-3xl sm:text-4xl md:text-5xl font-black tracking-tighter text-[var(--color-text)]`,children:`TONEDOKU`}),(0,M.jsx)(`button`,{type:`button`,onClick:()=>n(!0),className:`flex items-center justify-center rounded-full bg-[var(--color-surface)] p-2 sm:p-3 text-[var(--color-text-muted)] transition-all duration-200 hover:bg-[var(--color-surface)]/80 hover:text-[var(--color-text)] hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] min-w-[44px] min-h-[44px] relative z-10`,"aria-label":`Settings`,children:(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:[(0,M.jsx)(`path`,{d:`M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z`}),(0,M.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`})]})})]}),(0,M.jsxs)(`main`,{className:`space-y-8 sm:space-y-10`,children:[(0,M.jsx)(F,{title:`Major Scales`,scales:b,onScaleSelect:r}),(0,M.jsx)(`div`,{className:`pt-6 sm:pt-8 border-t border-[var(--color-surface)]`,children:(0,M.jsx)(`button`,{onClick:()=>e(`/mixed`),className:`group w-full rounded-xl border-2 border-[var(--color-primary)]/30 bg-gradient-to-br from-[var(--color-surface)] to-[var(--color-surface)]/50 p-6 sm:p-8 text-left transition-all hover:border-[var(--color-primary)] hover:shadow-lg hover:shadow-[var(--color-primary)]/10 active:scale-[0.99] cursor-pointer`,children:(0,M.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,M.jsx)(`div`,{className:`flex-shrink-0 flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-[var(--color-primary)]/10 text-[var(--color-primary)] group-hover:bg-[var(--color-primary)]/20 transition-colors`,children:(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-8 sm:h-8`,children:[(0,M.jsx)(`rect`,{x:`2`,y:`7`,width:`20`,height:`14`,rx:`2`,ry:`2`}),(0,M.jsx)(`path`,{d:`M16 3h5v5M21 3 11 13`})]})}),(0,M.jsxs)(`div`,{className:`flex-1`,children:[(0,M.jsx)(`h3`,{className:`text-xl sm:text-2xl font-bold text-[var(--color-text)] mb-1 group-hover:text-[var(--color-primary)] transition-colors`,children:`Mixed Practice`}),(0,M.jsx)(`p`,{className:`text-sm sm:text-base text-[var(--color-text-muted)]`,children:`Practice multiple scales at random`})]}),(0,M.jsx)(`div`,{className:`flex-shrink-0 text-[var(--color-text-muted)] group-hover:text-[var(--color-primary)] group-hover:translate-x-1 transition-all`,children:(0,M.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`24`,height:`24`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-7 sm:h-7`,children:(0,M.jsx)(`polyline`,{points:`9 18 15 12 9 6`})})})]})})})]}),(0,M.jsx)(L,{isOpen:t,onClose:()=>n(!1)})]})},z=({title:e,showBack:t=!1,rightElement:n})=>{let r=c();return(0,M.jsxs)(`header`,{className:`flex w-full items-center justify-between py-4 sm:py-6`,children:[(0,M.jsx)(`button`,{onClick:()=>r(t?-1:`/`),className:`flex items-center justify-center rounded-full bg-[var(--color-surface)] p-2 sm:p-3 text-[var(--color-text-muted)] transition-all duration-200 hover:bg-[var(--color-surface)]/80 hover:text-[var(--color-text)] hover:scale-105 active:scale-95 cursor-pointer min-w-[44px] min-h-[44px] touch-manipulation focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)]`,"aria-label":t?`Back`:`Home`,children:t?(0,M.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:(0,M.jsx)(`polyline`,{points:`15 18 9 12 15 6`})}):(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:[(0,M.jsx)(`path`,{d:`M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z`}),(0,M.jsx)(`polyline`,{points:`9 22 9 12 15 12 15 22`})]})}),(0,M.jsx)(`h1`,{className:`text-lg sm:text-xl md:text-2xl font-bold text-[var(--color-text)] text-center truncate px-2`,children:e}),n?(0,M.jsx)(`div`,{className:`flex items-center justify-center min-w-[44px]`,children:n}):(0,M.jsx)(`div`,{className:`min-w-[44px]`})]})},B=({level:e,missingNotes:t,label:n,onClick:r})=>(0,M.jsxs)(`button`,{onClick:r,className:`group flex w-full flex-col rounded-xl border border-[var(--color-surface)] bg-[var(--color-surface)] p-5 text-left transition-all hover:bg-[var(--color-surface)]/80 hover:border-[var(--color-primary)] active:scale-[0.98] cursor-pointer`,children:[(0,M.jsxs)(`span`,{className:`mb-1 text-sm font-medium text-[var(--color-text-muted)] group-hover:text-[var(--color-primary)] transition-colors`,children:[`Level `,e]}),(0,M.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,M.jsxs)(`span`,{className:`text-lg font-semibold text-[var(--color-text)]`,children:[t,` missing note`,t>1?`s`:``]}),n&&(0,M.jsx)(`span`,{className:`rounded-full bg-[var(--color-secondary)]/10 px-2 py-0.5 text-xs font-medium text-[var(--color-secondary)]`,children:n})]})]});const V=[{level:1,missingNotes:1,questionsCount:8,allowedPositions:[1,2,5,6]},{level:2,missingNotes:1,questionsCount:8,allowedPositions:[1,2,3,4,5,6]},{level:3,missingNotes:2,questionsCount:8,allowedPositions:[1,2,3,4,5,6]},{level:4,missingNotes:3,questionsCount:8,allowedPositions:[1,2,3,4,5,6]},{level:5,missingNotes:4,questionsCount:8,allowedPositions:[1,2,3,4,5,6]}];var H=()=>{let{scaleId:e}=n(),t=c(),r=b.find(t=>t.id===e);(0,v.useEffect)(()=>{e&&!r&&t(`/`,{replace:!0})},[e,r,t]);let i=n=>{e&&t(`/scale/${e}/level/${n}`)},a=e=>{if(e===1)return`Easy`;if(e===5)return`Challenge`};return r?(0,M.jsxs)(`div`,{className:`w-full max-w-md px-4 sm:px-6 pb-8 sm:pb-10`,children:[(0,M.jsx)(z,{title:r.name}),(0,M.jsxs)(`main`,{className:`mt-3 sm:mt-4 flex flex-col gap-4 sm:gap-6`,children:[(0,M.jsx)(`div`,{className:`text-center`,children:(0,M.jsx)(`h2`,{className:`text-lg sm:text-xl font-medium text-[var(--color-text-muted)]`,children:`Select Level`})}),(0,M.jsx)(`div`,{className:`flex flex-col gap-2 sm:gap-3`,children:V.map(e=>(0,M.jsx)(B,{level:e.level,missingNotes:e.missingNotes,label:a(e.level),onClick:()=>i(e.level)},e.level))})]})]}):null},U=({note:e,isLocked:t,isActive:n,isUserAnswer:r,onClick:i})=>{let a=j(),o=`flex items-center justify-center w-10 h-14 sm:w-12 sm:h-16 md:w-14 md:h-18 rounded-lg text-lg sm:text-xl md:text-2xl font-bold transition-all border-2 duration-300 touch-manipulation`;return t?r?o+=` bg-[var(--color-success)]/10 border-[var(--color-success)] text-[var(--color-success)] animate-bounce-in`:o+=` border-transparent bg-transparent text-[var(--color-text)]`:(o+=` cursor-pointer shadow-sm min-w-[44px] min-h-[44px]`,e?o+=` bg-[var(--color-surface)] border-[var(--color-primary)] text-[var(--color-primary)]`:o+=` bg-[var(--color-surface)] border-dashed border-[var(--color-text-muted)] text-[var(--color-text-muted)]`),n&&(o+=` ring-2 ring-[var(--color-primary)] ring-offset-2 ring-offset-[var(--color-background)] scale-110`),(0,M.jsx)(`div`,{className:o,onClick:t?void 0:i,children:e?a(e):`?`})},ee=({slots:e,onSlotClick:t,answerStatus:n})=>{let r=`flex w-full items-center justify-center gap-1 sm:gap-2 md:gap-3 lg:gap-4 py-4 sm:py-6 md:py-8 overflow-x-auto rounded-xl transition-colors duration-300 px-2`;return n===`correct`?r+=` bg-[var(--color-success)]/5 ring-2 ring-[var(--color-success)]/20`:n===`incorrect`&&(r+=` bg-[var(--color-error)]/5 ring-2 ring-[var(--color-error)]/20 animate-shake`),(0,M.jsx)(`div`,{className:r,children:e.map((e,n)=>(0,M.jsx)(U,{note:e.note,isLocked:e.isLocked,isActive:e.isActive,isUserAnswer:e.isUserAnswer,onClick:()=>t?.(n)},n))})},W=[`C`,`D`,`E`,`F`,`G`,`A`,`B`],G=v.memo(({selectedNote:e,onNoteSelect:t,disabled:n=!1})=>{let r=D(e=>e.noteNotation);return(0,M.jsx)(`div`,{className:`flex flex-wrap items-center justify-center gap-1.5 sm:gap-2 md:gap-3 py-1 sm:py-2`,children:W.map(i=>(0,M.jsx)(`button`,{onClick:()=>!n&&t(i),disabled:n,className:`
                        min-w-[44px] min-h-[44px] w-11 h-11 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-full text-base sm:text-lg font-bold transition-all duration-200 touch-manipulation
                        active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)]
                        ${e===i?`bg-[var(--color-primary)] text-white shadow-lg scale-110`:`bg-[var(--color-surface)] text-[var(--color-text)] hover:bg-[var(--color-surface)]/80 hover:scale-105`} ${n?`opacity-50 cursor-not-allowed hover:scale-100 active:scale-100`:``}
                    `,children:A(i,r)},i))})});G.displayName=`NoteSelector`;var te=G,K=[{value:`natural`,label:`Natural`,symbol:`♮`},{value:`sharp`,label:`Sharp`,symbol:`♯`},{value:`flat`,label:`Flat`,symbol:`♭`}],q=v.memo(({selectedAccidental:e,onAccidentalSelect:t,disabled:n=!1})=>(0,M.jsx)(`div`,{className:`flex items-center justify-center gap-1.5 sm:gap-2 md:gap-3 py-1 sm:py-2`,children:K.map(r=>(0,M.jsx)(`button`,{onClick:()=>!n&&t(r.value),disabled:n,className:`
                        min-w-[44px] min-h-[44px] w-14 h-14 sm:w-16 sm:h-16 rounded-lg text-xl sm:text-2xl md:text-3xl font-bold transition-all duration-200 flex items-center justify-center touch-manipulation
                        active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)]
                        ${e===r.value?`bg-[var(--color-primary)] text-white shadow-lg border-2 border-[var(--color-primary)] scale-105`:`bg-[var(--color-surface)] text-[var(--color-text)] border-2 border-[var(--color-border)] hover:border-[var(--color-primary)] hover:scale-105`} ${n?`opacity-50 cursor-not-allowed hover:border-[var(--color-border)] hover:scale-100 active:scale-100`:``}
                    `,"aria-label":r.label,children:r.symbol},r.value))}));q.displayName=`AccidentalSelector`;var ne=q,re=v.memo(({scaleName:e,levelNumber:t,onPlayAgain:n,onNextLevel:r,hasNextLevel:i,isMixedMode:a=!1})=>{let o=c();return(0,M.jsx)(`div`,{className:`absolute inset-0 z-50 flex flex-col items-center justify-center bg-[var(--color-background)]/95 backdrop-blur-sm p-4 sm:p-6 animate-in fade-in zoom-in duration-300`,children:(0,M.jsxs)(`div`,{className:`flex flex-col items-center max-w-md w-full gap-6 sm:gap-8 text-center`,children:[(0,M.jsxs)(`div`,{className:`relative`,children:[(0,M.jsx)(`div`,{className:`absolute inset-0 animate-ping rounded-full bg-[var(--color-success)] opacity-20 duration-1000`}),(0,M.jsx)(`div`,{className:`relative flex h-20 w-20 sm:h-24 sm:w-24 items-center justify-center rounded-full bg-[var(--color-surface)] text-[var(--color-success)] shadow-lg ring-4 ring-[var(--color-success)]/20`,children:(0,M.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`40`,height:`40`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`3`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-12 sm:h-12 animate-bounce-in`,children:(0,M.jsx)(`polyline`,{points:`20 6 9 17 4 12`})})})]}),(0,M.jsxs)(`div`,{className:`space-y-2`,children:[(0,M.jsx)(`h2`,{className:`text-2xl sm:text-3xl md:text-4xl font-black tracking-tight text-[var(--color-text)]`,children:`Level Complete!`}),(0,M.jsx)(`p`,{className:`text-base sm:text-lg text-[var(--color-text-muted)]`,children:a?`You've completed ${e} - Level ${t}`:`You've mastered ${e} - Level ${t}`})]}),(0,M.jsxs)(`div`,{className:`flex flex-col gap-3 w-full sm:w-2/3`,children:[i&&r&&(0,M.jsx)(I,{variant:`primary`,onClick:r,className:`w-full py-3 sm:py-4 text-base sm:text-lg shadow-lg shadow-[var(--color-primary)]/20`,children:`Next Level`}),(0,M.jsx)(I,{variant:`secondary`,onClick:n,className:`w-full`,children:`Play Again`}),(0,M.jsx)(I,{variant:`outline`,onClick:()=>{o(a?`/mixed`:-1)},className:`w-full`,children:a?`Back to Mixed Levels`:`Back to Levels`})]})]})})});re.displayName=`LevelComplete`;var ie=re;const J=[{level:1,missingNotes:1,questionsCount:8,scaleCount:4,allowedPositions:[1,2,5,6]},{level:2,missingNotes:1,questionsCount:10,scaleCount:6,allowedPositions:[1,2,3,4,5,6]},{level:3,missingNotes:2,questionsCount:10,scaleCount:8,allowedPositions:[1,2,3,4,5,6]},{level:4,missingNotes:2,questionsCount:12,scaleCount:10,allowedPositions:[1,2,3,4,5,6]},{level:5,missingNotes:3,questionsCount:12,scaleCount:12,allowedPositions:[1,2,3,4,5,6]}],ae=(e,t)=>{let{allowedPositions:n=[],missingNotes:r,questionsCount:i}=t,a=[],o=(e,t)=>{if(t.length===r){a.push([...t]);return}for(let r=e;r<n.length;r++)o(r+1,[...t,n[r]])};o(0,[]);for(let e=a.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}let s=[];for(let t=0;t<i;t++){let n=a[t%a.length];s.push({scaleNotes:e.notes,hiddenPositions:n,answered:!1,correct:null,userAnswers:new Map})}return s},oe=(e,t)=>{let{scaleCount:n,missingNotes:r,questionsCount:i,allowedPositions:a=[]}=t,o=[...e].sort(()=>Math.random()-.5).slice(0,Math.min(n,e.length)),s=[],c=(e,t)=>{if(t.length===r){s.push([...t]);return}for(let n=e;n<a.length;n++)c(n+1,[...t,a[n]])};c(0,[]);for(let e=s.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[s[e],s[t]]=[s[t],s[e]]}let l=[],u=Math.ceil(i/o.length);for(let e=0;e<o.length;e++){let t=o[e],n=i-l.length,r=Math.min(u,n);for(let n=0;n<r;n++){let r=s[(e*u+n)%s.length];l.push({scaleNotes:t.notes,hiddenPositions:r,answered:!1,correct:null,userAnswers:new Map,scaleName:t.name,scaleId:t.id})}}for(let e=l.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[l[e],l[t]]=[l[t],l[e]]}return l},se=(e,t,n)=>!(e.name!==t||e.accidental!==n),ce=d((e,t)=>({scale:null,level:null,questions:[],currentQuestionIndex:0,selectedNote:null,selectedAccidental:`natural`,answerStatus:`pending`,lastCorrectNote:null,mixedMode:!1,mixedLevel:null,currentScaleName:null,initGame:(t,n)=>{let r=b.find(e=>e.id===t),i=V.find(e=>e.level===n);if(!r||!i){console.error(`Invalid scale or level`);return}e({scale:r,level:i,questions:ae(r,i),currentQuestionIndex:0,selectedNote:null,selectedAccidental:`natural`,answerStatus:`pending`,lastCorrectNote:null,mixedMode:!1,mixedLevel:null,currentScaleName:null})},initMixedGame:t=>{let n=J.find(e=>e.level===t);if(!n){console.error(`Invalid mixed level`);return}let r=oe(b,n);e({scale:null,level:null,questions:r,currentQuestionIndex:0,selectedNote:null,selectedAccidental:`natural`,answerStatus:`pending`,lastCorrectNote:null,mixedMode:!0,mixedLevel:t,currentScaleName:r[0]?.scaleName||null})},selectNote:t=>{e(e=>({selectedNote:t,answerStatus:e.answerStatus===`incorrect`?`pending`:e.answerStatus}))},selectAccidental:t=>{e(e=>({selectedAccidental:t,answerStatus:e.answerStatus===`incorrect`?`pending`:e.answerStatus}))},submitAnswer:()=>{let{questions:n,currentQuestionIndex:r,selectedNote:i,selectedAccidental:a,answerStatus:o}=t();if(!i||o===`correct`)return;let s=n[r],{hiddenPositions:c,scaleNotes:l,userAnswers:u}=s,d=[...c].sort((e,t)=>e-t),f=d.find(e=>!u?.has(e));if(f===void 0)return;let p=l[f];if(se(p,i,a)){let t=new Map(u||[]);t.set(f,{name:i,accidental:a,display:a===`sharp`?`${i}#`:a===`flat`?`${i}b`:i});let o=d.every(e=>t.has(e)),c=[...n];c[r]={...s,userAnswers:t,correct:o?!0:null,answered:o},e({questions:c,answerStatus:o?`correct`:`pending`,lastCorrectNote:{name:i,accidental:a},selectedNote:o?i:null,selectedAccidental:o?a:`natural`})}else e({answerStatus:`incorrect`,lastCorrectNote:null})},nextQuestion:()=>{let{currentQuestionIndex:n,questions:r,mixedMode:i}=t();if(n<r.length-1){let t=n+1,a=r[t]?.correct===!0,o=r[t];e({currentQuestionIndex:t,selectedNote:null,selectedAccidental:`natural`,answerStatus:a?`correct`:`pending`,lastCorrectNote:null,currentScaleName:i&&o?o.scaleName:null})}},previousQuestion:()=>{let{currentQuestionIndex:n,questions:r,mixedMode:i}=t();if(n>0){let t=n-1,a=r[t]?.correct===!0,o=r[t];e({currentQuestionIndex:t,selectedNote:null,selectedAccidental:`natural`,answerStatus:a?`correct`:`pending`,lastCorrectNote:null,currentScaleName:i&&o?o.scaleName:null})}},resetSelection:()=>{e({selectedNote:null,selectedAccidental:`natural`,answerStatus:`pending`,lastCorrectNote:null})},resetGame:()=>{e({scale:null,level:null,questions:[],currentQuestionIndex:0,selectedNote:null,selectedAccidental:`natural`,answerStatus:`pending`,lastCorrectNote:null,mixedMode:!1,mixedLevel:null,currentScaleName:null})},clearLastCorrectNote:()=>{e({lastCorrectNote:null})}})),le=()=>{let[e,t]=(0,v.useState)(()=>{let e=localStorage.getItem(`tonedoku_audio_enabled`);return e===null?!0:e===`true`});return{isAudioEnabled:e,toggleAudio:()=>{t(e=>{let t=!e;return localStorage.setItem(`tonedoku_audio_enabled`,String(t)),t})}}};var Y=null,X=null,Z=()=>{let{soundEnabled:e,volume:t}=D.getState();return{soundEnabled:e,volume:t}};const Q=async()=>{await f(),Y||=new h({urls:{C3:`C3.mp3`,"D#3":`Ds3.mp3`,"F#3":`Fs3.mp3`,A3:`A3.mp3`,C4:`C4.mp3`,"D#4":`Ds4.mp3`,"F#4":`Fs4.mp3`,A4:`A4.mp3`,C5:`C5.mp3`,"D#5":`Ds5.mp3`,"F#5":`Fs5.mp3`,A5:`A5.mp3`},release:1,baseUrl:`https://tonejs.github.io/audio/salamander/`}).toDestination(),X||=new p().toDestination()};var ue=(e,t,n=4)=>{let r=``;return t===`sharp`&&(r=`#`),t===`flat`&&(r=`b`),`${e}${r}${n}`},de=[`C`,`D`,`E`,`F`,`G`,`A`,`B`];const $=async(e,t=`natural`,n=4,r=`8n`,i)=>{let{soundEnabled:a,volume:o}=Z();if(!a)return;g.state!==`running`&&await Q();let s=ue(e,t,n);Y?.triggerAttackRelease(s,r,i,o)},fe=async()=>{let{soundEnabled:e,volume:t}=Z();e&&(g.state!==`running`&&await Q(),X?.triggerAttackRelease(`C1`,`8n`,void 0,t))},pe=async(e,t,n)=>{let{soundEnabled:r}=Z();if(!r)return;g.state!==`running`&&await Q();let i=m();$(e,t,4,1.5,i);let a=i+1.8,o=.4,s=4,c=-1;n.forEach((e,t)=>{let n=de.indexOf(e.name);t>0&&n<=c&&s++,$(e.name,e.accidental,s,o,a+t*o),c=n})},me=()=>{Y&&=(Y.dispose(),null),X&&=(X.dispose(),null)};var he=()=>{let{scaleId:e,levelId:t}=n(),r=c(),i=o(),{scale:a,level:l,questions:u,currentQuestionIndex:d,selectedNote:f,selectedAccidental:p,answerStatus:m,lastCorrectNote:h,initGame:g,selectNote:_,selectAccidental:y,submitAnswer:x,nextQuestion:S,previousQuestion:C,resetSelection:w,resetGame:T,clearLastCorrectNote:E}=ce(),{isAudioEnabled:D,toggleAudio:O}=le(),[k,A]=v.useState(!1),[j,N]=v.useState(!1),P=(0,v.useRef)(i.pathname),F=(0,v.useRef)(!1),L=u[d];(0,v.useEffect)(()=>{let e=i.pathname;e!==P.current&&(/^\/scale\/[^/]+\/level\/\d+$/.test(e)?(N(!1),A(!1)):T(),P.current=e)},[i.pathname,T]),(0,v.useEffect)(()=>{if(!e){r(`/`,{replace:!0});return}if(!b.find(t=>t.id===e)){r(`/`,{replace:!0});return}if(!t){r(`/scale/${e}`,{replace:!0});return}let n=parseInt(t,10);if(!V.find(e=>e.level===n)||n<1||n>5){r(`/scale/${e}`,{replace:!0});return}},[e,t,r]),(0,v.useEffect)(()=>{if(e&&t){let n=parseInt(t,10);n>=1&&n<=5&&(F.current=!1,g(e,n),N(!1),F.current=!0)}},[e,t,g]),(0,v.useEffect)(()=>()=>{me(),F.current=!1},[]),(0,v.useEffect)(()=>{let e=()=>{Q().catch(console.error),window.removeEventListener(`click`,e),window.removeEventListener(`keydown`,e)};return window.addEventListener(`click`,e),window.addEventListener(`keydown`,e),()=>{window.removeEventListener(`click`,e),window.removeEventListener(`keydown`,e)}},[]),(0,v.useEffect)(()=>{if(F.current)if(m===`incorrect`){D&&fe();let e=setTimeout(()=>{w()},600);return()=>clearTimeout(e)}else if(m===`correct`&&L&&h){if(D&&a){A(!0),pe(h.name,h.accidental,a.notes);let e=setTimeout(()=>{A(!1),E()},5e3);return()=>clearTimeout(e)}}else h&&m===`pending`&&D&&($(h.name,h.accidental,4,`4n`),E())},[m,D,L,a,w,h,E]);let R=(0,v.useMemo)(()=>{if(!L)return Array(8).fill({note:null,isLocked:!0,isActive:!1});let{scaleNotes:e,hiddenPositions:t,userAnswers:n}=L,r=[...t].sort((e,t)=>e-t).find(e=>!n?.has(e));return e.map((e,i)=>{if(!t.includes(i))return{note:e,isLocked:!0,isActive:!1};if(n?.has(i))return{note:n.get(i)||null,isLocked:!0,isActive:!1,isUserAnswer:!0};let a=i===r,o=null;return a&&f&&(o={name:f,accidental:p,display:p===`sharp`?`${f}#`:p===`flat`?`${f}b`:f}),{note:o,isLocked:!1,isActive:a}})},[L,f,p]);if((0,v.useEffect)(()=>{if(!a||!l||!L)return;let e=e=>{let t=L.correct===!0,n=f!==null&&m!==`correct`;if(t||k)return;let i={c:`C`,d:`D`,e:`E`,f:`F`,g:`G`,a:`A`,b:`B`},a=e.key.toLowerCase();if(i[a]){e.preventDefault(),_(i[a]);return}if(e.key===`1`){e.preventDefault(),y(`natural`);return}if(e.key===`2`){e.preventDefault(),y(`sharp`);return}if(e.key===`3`){e.preventDefault(),y(`flat`);return}if(e.key===`Enter`&&n){e.preventDefault(),x();return}if(e.key===`Escape`){e.preventDefault(),r(`/`);return}};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[a,l,L,f,m,k,_,y,x,r]),!a||!l||!L)return(0,M.jsx)(`div`,{className:`flex flex-col items-center justify-center min-h-screen px-4 text-[var(--color-text)]`,children:(0,M.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,M.jsx)(`div`,{className:`w-12 h-12 border-4 border-[var(--color-primary)]/20 border-t-[var(--color-primary)] rounded-full animate-spin`}),(0,M.jsx)(`h2`,{className:`text-lg sm:text-xl font-semibold`,children:`Loading Game...`}),(0,M.jsx)(s,{to:`/`,className:`text-[var(--color-primary)] hover:underline focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] rounded px-2 py-1`,children:`Go Home`})]})});let B=f!==null&&m!==`correct`,H=L.correct===!0,U=d===u.length-1&&H,W=()=>{d<u.length-1?S():N(!0)},G=()=>{e&&t&&(g(e,parseInt(t,10)),N(!1))},K=()=>{if(e&&t){let n=parseInt(t,10)+1;n<=5&&(g(e,n),N(!1),r(`/scale/${e}/level/${n}`,{replace:!0}))}},q=parseInt(t||`0`,10)<5;return(0,M.jsxs)(`div`,{className:`flex flex-col min-h-screen w-full max-w-4xl mx-auto px-3 sm:px-4 md:px-6`,children:[(0,M.jsx)(z,{title:`${a.name} - Level ${l.level}`,showBack:!0,onCheckStatus:()=>{},rightElement:(0,M.jsx)(`button`,{onClick:O,className:`flex items-center justify-center rounded-full bg-[var(--color-surface)] p-2 sm:p-3 hover:bg-[var(--color-surface)]/80 transition-all duration-200 text-[var(--color-text-muted)] hover:text-[var(--color-text)] active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] min-w-[44px] min-h-[44px] touch-manipulation`,title:D?`Mute Audio`:`Enable Audio`,"aria-label":D?`Mute Audio`:`Enable Audio`,children:D?(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:[(0,M.jsx)(`polygon`,{points:`11 5 6 9 2 9 2 15 6 15 11 19 11 5`}),(0,M.jsx)(`path`,{d:`M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07`})]}):(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:[(0,M.jsx)(`polygon`,{points:`11 5 6 9 2 9 2 15 6 15 11 19 11 5`}),(0,M.jsx)(`line`,{x1:`23`,y1:`9`,x2:`17`,y2:`15`}),(0,M.jsx)(`line`,{x1:`17`,y1:`9`,x2:`23`,y2:`15`})]})})}),(0,M.jsx)(`div`,{className:`flex justify-center w-full mb-2 sm:mb-4`,children:(0,M.jsxs)(`div`,{className:`text-sm sm:text-base md:text-lg text-[var(--color-text-muted)] font-mono font-bold bg-[var(--color-surface)] px-3 py-1 rounded-full`,children:[d+1,`/`,u.length]})}),(0,M.jsxs)(`main`,{className:`flex-1 flex flex-col items-center justify-between gap-2 sm:gap-4 md:gap-6 py-2 sm:py-4 md:py-6`,children:[(0,M.jsx)(`div`,{className:`w-full`,children:(0,M.jsx)(ee,{slots:R,answerStatus:m,onSlotClick:()=>{}})}),(0,M.jsxs)(`div`,{className:`relative w-full h-6 sm:h-8 flex items-center justify-center`,children:[m===`incorrect`&&(0,M.jsx)(`div`,{className:`absolute text-[var(--color-danger)] font-bold text-base sm:text-lg animate-shake`,children:`Incorrect, try again!`}),m===`correct`&&(0,M.jsx)(`div`,{className:`absolute text-[var(--color-success)] font-bold text-base sm:text-lg animate-bounce-in`,children:`Correct!`})]}),(0,M.jsxs)(`div`,{className:`w-full max-w-2xl flex flex-col gap-2 sm:gap-4`,children:[(0,M.jsxs)(`div`,{className:`flex flex-col items-center gap-0.5 sm:gap-1`,children:[(0,M.jsx)(`label`,{className:`text-[var(--color-text-muted)] text-xs uppercase tracking-wider font-semibold`,children:`Note`}),(0,M.jsx)(te,{selectedNote:f,onNoteSelect:_,disabled:H})]}),(0,M.jsxs)(`div`,{className:`flex flex-col items-center gap-0.5 sm:gap-1`,children:[(0,M.jsx)(`label`,{className:`text-[var(--color-text-muted)] text-xs uppercase tracking-wider font-semibold`,children:`Accidental`}),(0,M.jsx)(ne,{selectedAccidental:p,onAccidentalSelect:y,disabled:H})]}),(0,M.jsx)(`div`,{className:`flex justify-center mt-1 sm:mt-2`,children:H?(0,M.jsx)(I,{variant:`success`,onClick:W,disabled:k,className:`w-full max-w-xs text-sm sm:text-base py-2.5 sm:py-3 animate-in fade-in zoom-in`,children:U?`FINISH`:k?`PLAYING...`:`NEXT`}):(0,M.jsx)(I,{variant:`primary`,disabled:!B,onClick:x,className:`w-full max-w-xs text-sm sm:text-base py-2.5 sm:py-3 transition-colors ${m===`incorrect`?`animate-shake bg-[var(--color-danger)] border-[var(--color-danger)]`:``}`,children:`SUBMIT`})})]}),(0,M.jsxs)(`div`,{className:`w-full flex justify-between items-center gap-2`,children:[(0,M.jsxs)(I,{variant:`secondary`,onClick:C,disabled:d===0,className:`flex items-center gap-1 sm:gap-2 text-sm sm:text-base`,children:[(0,M.jsx)(`span`,{children:`◀`}),` `,(0,M.jsx)(`span`,{className:`hidden sm:inline`,children:`Back`})]}),(0,M.jsxs)(I,{variant:`secondary`,onClick:S,disabled:!H,className:`flex items-center gap-1 sm:gap-2 text-sm sm:text-base`,children:[(0,M.jsx)(`span`,{className:`hidden sm:inline`,children:`Next`}),` `,(0,M.jsx)(`span`,{children:`▶`})]})]})]}),j&&(0,M.jsx)(ie,{scaleName:a.name,levelNumber:l.level,onPlayAgain:G,onNextLevel:K,hasNextLevel:q})]})},ge=()=>{let e=c(),t=t=>{e(`/mixed/${t}`)},n=e=>{switch(e){case 1:return`Easy`;case 2:return`Medium`;case 3:return`Hard`;case 4:return`Expert`;case 5:return`Master`;default:return}};return(0,M.jsxs)(`div`,{className:`w-full max-w-md px-4 sm:px-6 pb-8 sm:pb-10`,children:[(0,M.jsx)(z,{title:`Mixed Practice`}),(0,M.jsxs)(`main`,{className:`mt-3 sm:mt-4 flex flex-col gap-4 sm:gap-6`,children:[(0,M.jsxs)(`div`,{className:`text-center`,children:[(0,M.jsx)(`h2`,{className:`text-lg sm:text-xl font-medium text-[var(--color-text-muted)]`,children:`Practice scales at random!`}),(0,M.jsx)(`p`,{className:`text-sm text-[var(--color-text-muted)] mt-2`,children:`Each level includes multiple scales shuffled together`})]}),(0,M.jsx)(`div`,{className:`flex flex-col gap-2 sm:gap-3`,children:J.map(e=>(0,M.jsxs)(`button`,{onClick:()=>t(e.level),className:`group flex w-full flex-col rounded-xl border border-[var(--color-surface)] bg-[var(--color-surface)] p-5 text-left transition-all hover:bg-[var(--color-surface)]/80 hover:border-[var(--color-primary)] active:scale-[0.98] cursor-pointer`,children:[(0,M.jsxs)(`div`,{className:`flex items-center justify-between mb-1`,children:[(0,M.jsxs)(`span`,{className:`text-sm font-medium text-[var(--color-text-muted)] group-hover:text-[var(--color-primary)] transition-colors`,children:[`Level `,e.level]}),n(e.level)&&(0,M.jsx)(`span`,{className:`rounded-full bg-[var(--color-secondary)]/10 px-2 py-0.5 text-xs font-medium text-[var(--color-secondary)]`,children:n(e.level)})]}),(0,M.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[(0,M.jsxs)(`span`,{className:`text-lg font-semibold text-[var(--color-text)]`,children:[e.scaleCount,` scales, `,e.missingNotes,` missing note`,e.missingNotes>1?`s`:``]}),(0,M.jsxs)(`span`,{className:`text-xs text-[var(--color-text-muted)]`,children:[e.questionsCount,` questions total`]})]})]},e.level))})]})]})},_e=()=>{let{levelId:e}=n(),t=c(),r=o(),{questions:i,currentQuestionIndex:a,selectedNote:l,selectedAccidental:u,answerStatus:d,lastCorrectNote:f,mixedMode:p,mixedLevel:m,currentScaleName:h,initMixedGame:g,selectNote:_,selectAccidental:y,submitAnswer:b,nextQuestion:x,previousQuestion:S,resetSelection:C,resetGame:w,clearLastCorrectNote:T}=ce(),{isAudioEnabled:E,toggleAudio:D}=le(),[O,k]=v.useState(!1),[A,j]=v.useState(!1),N=(0,v.useRef)(r.pathname),P=(0,v.useRef)(!1),F=i[a],L=J.find(e=>e.level===m);(0,v.useEffect)(()=>{let e=r.pathname;e!==N.current&&(/^\/mixed\/\d+$/.test(e)?(j(!1),k(!1)):w(),N.current=e)},[r.pathname,w]),(0,v.useEffect)(()=>{if(!e){t(`/mixed`,{replace:!0});return}let n=parseInt(e,10);if(!J.find(e=>e.level===n)||n<1||n>5){t(`/mixed`,{replace:!0});return}},[e,t]),(0,v.useEffect)(()=>{if(e){let t=parseInt(e,10);t>=1&&t<=5&&(P.current=!1,g(t),j(!1),P.current=!0)}},[e,g]),(0,v.useEffect)(()=>()=>{me(),P.current=!1},[]),(0,v.useEffect)(()=>{let e=()=>{Q().catch(console.error),window.removeEventListener(`click`,e),window.removeEventListener(`keydown`,e)};return window.addEventListener(`click`,e),window.addEventListener(`keydown`,e),()=>{window.removeEventListener(`click`,e),window.removeEventListener(`keydown`,e)}},[]),(0,v.useEffect)(()=>{if(P.current)if(d===`incorrect`){E&&fe();let e=setTimeout(()=>{C()},600);return()=>clearTimeout(e)}else if(d===`correct`&&F&&f){if(E){k(!0),pe(f.name,f.accidental,F.scaleNotes);let e=setTimeout(()=>{k(!1),T()},5e3);return()=>clearTimeout(e)}}else f&&d===`pending`&&E&&($(f.name,f.accidental,4,`4n`),T())},[d,E,F,C,f,T]);let R=(0,v.useMemo)(()=>{if(!F)return Array(8).fill({note:null,isLocked:!0,isActive:!1});let{scaleNotes:e,hiddenPositions:t,userAnswers:n}=F,r=[...t].sort((e,t)=>e-t).find(e=>!n?.has(e));return e.map((e,i)=>{if(!t.includes(i))return{note:e,isLocked:!0,isActive:!1};if(n?.has(i))return{note:n.get(i)||null,isLocked:!0,isActive:!1,isUserAnswer:!0};let a=i===r,o=null;return a&&l&&(o={name:l,accidental:u,display:u===`sharp`?`${l}#`:u===`flat`?`${l}b`:l}),{note:o,isLocked:!1,isActive:a}})},[F,l,u]);if((0,v.useEffect)(()=>{if(!p||!L||!F)return;let e=e=>{let n=F.correct===!0,r=l!==null&&d!==`correct`;if(n||O)return;let i={c:`C`,d:`D`,e:`E`,f:`F`,g:`G`,a:`A`,b:`B`},a=e.key.toLowerCase();if(i[a]){e.preventDefault(),_(i[a]);return}if(e.key===`1`){e.preventDefault(),y(`natural`);return}if(e.key===`2`){e.preventDefault(),y(`sharp`);return}if(e.key===`3`){e.preventDefault(),y(`flat`);return}if(e.key===`Enter`&&r){e.preventDefault(),b();return}if(e.key===`Escape`){e.preventDefault(),t(`/mixed`);return}};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[p,L,F,l,d,O,_,y,b,t]),!p||!L||!F)return(0,M.jsx)(`div`,{className:`flex flex-col items-center justify-center min-h-screen px-4 text-[var(--color-text)]`,children:(0,M.jsxs)(`div`,{className:`flex flex-col items-center gap-4`,children:[(0,M.jsx)(`div`,{className:`w-12 h-12 border-4 border-[var(--color-primary)]/20 border-t-[var(--color-primary)] rounded-full animate-spin`}),(0,M.jsx)(`h2`,{className:`text-lg sm:text-xl font-semibold`,children:`Loading Mixed Practice...`}),(0,M.jsx)(s,{to:`/mixed`,className:`text-[var(--color-primary)] hover:underline focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] rounded px-2 py-1`,children:`Go Back`})]})});let B=l!==null&&d!==`correct`,V=F.correct===!0,H=a===i.length-1&&V,U=()=>{a<i.length-1?x():j(!0)},W=()=>{e&&(g(parseInt(e,10)),j(!1))},G=()=>{if(e){let n=parseInt(e,10)+1;n<=5&&(g(n),j(!1),t(`/mixed/${n}`,{replace:!0}))}},K=parseInt(e||`0`,10)<5;return(0,M.jsxs)(`div`,{className:`flex flex-col min-h-screen w-full max-w-4xl mx-auto px-3 sm:px-4 md:px-6`,children:[(0,M.jsx)(z,{title:`Mixed Practice - Level ${L.level}`,showBack:!0,onCheckStatus:()=>{},rightElement:(0,M.jsx)(`button`,{onClick:D,className:`flex items-center justify-center rounded-full bg-[var(--color-surface)] p-2 sm:p-3 hover:bg-[var(--color-surface)]/80 transition-all duration-200 text-[var(--color-text-muted)] hover:text-[var(--color-text)] active:scale-95 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 focus:ring-offset-[var(--color-background)] min-w-[44px] min-h-[44px] touch-manipulation`,title:E?`Mute Audio`:`Enable Audio`,"aria-label":E?`Mute Audio`:`Enable Audio`,children:E?(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:[(0,M.jsx)(`polygon`,{points:`11 5 6 9 2 9 2 15 6 15 11 19 11 5`}),(0,M.jsx)(`path`,{d:`M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07`})]}):(0,M.jsxs)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:`sm:w-6 sm:h-6`,children:[(0,M.jsx)(`polygon`,{points:`11 5 6 9 2 9 2 15 6 15 11 19 11 5`}),(0,M.jsx)(`line`,{x1:`23`,y1:`9`,x2:`17`,y2:`15`}),(0,M.jsx)(`line`,{x1:`17`,y1:`9`,x2:`23`,y2:`15`})]})})}),(0,M.jsx)(`div`,{className:`flex justify-center w-full mb-2`,children:(0,M.jsx)(`div`,{className:`text-base sm:text-lg md:text-xl font-semibold text-[var(--color-primary)] bg-[var(--color-surface)] px-4 py-2 rounded-lg border-2 border-[var(--color-primary)]/20`,children:h})}),(0,M.jsx)(`div`,{className:`flex justify-center w-full mb-2 sm:mb-4`,children:(0,M.jsxs)(`div`,{className:`text-sm sm:text-base md:text-lg text-[var(--color-text-muted)] font-mono font-bold bg-[var(--color-surface)] px-3 py-1 rounded-full`,children:[a+1,`/`,i.length]})}),(0,M.jsxs)(`main`,{className:`flex-1 flex flex-col items-center justify-between gap-2 sm:gap-4 md:gap-6 py-2 sm:py-4 md:py-6`,children:[(0,M.jsx)(`div`,{className:`w-full`,children:(0,M.jsx)(ee,{slots:R,answerStatus:d,onSlotClick:()=>{}})}),(0,M.jsxs)(`div`,{className:`relative w-full h-6 sm:h-8 flex items-center justify-center`,children:[d===`incorrect`&&(0,M.jsx)(`div`,{className:`absolute text-[var(--color-danger)] font-bold text-base sm:text-lg animate-shake`,children:`Incorrect, try again!`}),d===`correct`&&(0,M.jsx)(`div`,{className:`absolute text-[var(--color-success)] font-bold text-base sm:text-lg animate-bounce-in`,children:`Correct!`})]}),(0,M.jsxs)(`div`,{className:`w-full max-w-2xl flex flex-col gap-2 sm:gap-4`,children:[(0,M.jsxs)(`div`,{className:`flex flex-col items-center gap-0.5 sm:gap-1`,children:[(0,M.jsx)(`label`,{className:`text-[var(--color-text-muted)] text-xs uppercase tracking-wider font-semibold`,children:`Note`}),(0,M.jsx)(te,{selectedNote:l,onNoteSelect:_,disabled:V})]}),(0,M.jsxs)(`div`,{className:`flex flex-col items-center gap-0.5 sm:gap-1`,children:[(0,M.jsx)(`label`,{className:`text-[var(--color-text-muted)] text-xs uppercase tracking-wider font-semibold`,children:`Accidental`}),(0,M.jsx)(ne,{selectedAccidental:u,onAccidentalSelect:y,disabled:V})]}),(0,M.jsx)(`div`,{className:`flex justify-center mt-1 sm:mt-2`,children:V?(0,M.jsx)(I,{variant:`success`,onClick:U,disabled:O,className:`w-full max-w-xs text-sm sm:text-base py-2.5 sm:py-3 animate-in fade-in zoom-in`,children:H?`FINISH`:O?`PLAYING...`:`NEXT`}):(0,M.jsx)(I,{variant:`primary`,disabled:!B,onClick:b,className:`w-full max-w-xs text-sm sm:text-base py-2.5 sm:py-3 transition-colors ${d===`incorrect`?`animate-shake bg-[var(--color-danger)] border-[var(--color-danger)]`:``}`,children:`SUBMIT`})})]}),(0,M.jsxs)(`div`,{className:`w-full flex justify-between items-center gap-2`,children:[(0,M.jsxs)(I,{variant:`secondary`,onClick:S,disabled:a===0,className:`flex items-center gap-1 sm:gap-2 text-sm sm:text-base`,children:[(0,M.jsx)(`span`,{children:`◀`}),` `,(0,M.jsx)(`span`,{className:`hidden sm:inline`,children:`Back`})]}),(0,M.jsxs)(I,{variant:`secondary`,onClick:x,disabled:!V,className:`flex items-center gap-1 sm:gap-2 text-sm sm:text-base`,children:[(0,M.jsx)(`span`,{className:`hidden sm:inline`,children:`Next`}),` `,(0,M.jsx)(`span`,{children:`▶`})]})]})]}),A&&(0,M.jsx)(ie,{scaleName:`Mixed Practice`,levelNumber:L.level,onPlayAgain:W,onNextLevel:G,hasNextLevel:K,isMixedMode:!0})]})};function ve(){let e=D(e=>e.loadFromStorage);return(0,v.useEffect)(()=>{e()},[e]),(0,M.jsx)(a,{basename:`/tonedoku`,children:(0,M.jsx)(`div`,{className:`flex min-h-screen w-full flex-col items-center justify-center`,children:(0,M.jsxs)(t,{children:[(0,M.jsx)(r,{path:`/`,element:(0,M.jsx)(R,{})}),(0,M.jsx)(r,{path:`/scale/:scaleId`,element:(0,M.jsx)(H,{})}),(0,M.jsx)(r,{path:`/scale/:scaleId/level/:levelId`,element:(0,M.jsx)(he,{})}),(0,M.jsx)(r,{path:`/mixed`,element:(0,M.jsx)(ge,{})}),(0,M.jsx)(r,{path:`/mixed/:levelId`,element:(0,M.jsx)(_e,{})})]})})})}var ye=ve;(0,_.createRoot)(document.getElementById(`root`)).render((0,M.jsx)(v.StrictMode,{children:(0,M.jsx)(ye,{})}));